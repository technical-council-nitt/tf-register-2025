const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WaterDropGrid-rEOghrbQ.js","assets/ui-DtQK8oIH.js","assets/vendor-DTE74Mn0.js","assets/spline-CYGbxXPz.js","assets/supabase-BBSrB3Yz.js","assets/animations-BNELU3II.js"])))=>i.map(i=>d[i]);
import{_ as g}from"./supabase-BBSrB3Yz.js";import{j as e}from"./ui-DtQK8oIH.js";import{r as x}from"./vendor-DTE74Mn0.js";import{u as y,o as N,s as t}from"./forms-Dyg-ob1i.js";import{F as w,a,b as o,c as n,d as i,e as d,S as v,f as E,g as k,h as F,i as _,t as S}from"./select-AYan2wrq.js";import{B as R,s as u}from"./supabase-BUPhfWfK.js";import{I as c}from"./input-B0jt3_8k.js";import{L}from"./loader-circle-DnYZ73mE.js";import"./check-CM7pYQ67.js";const C=x.lazy(()=>g(()=>import("./WaterDropGrid-rEOghrbQ.js"),__vite__mapDeps([0,1,2,3,4,5]))),I=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Others"}],T=N({name:t().min(1,"Full Name is required"),rollNumber:t().length(9,"Roll Number must be exactly 9 digits").regex(/^\d+$/,"Roll Number must contain only digits"),personalEmail:t().email("Invalid email address"),hostel:t().nonempty("Hostel is required"),gender:t().nonempty("Gender is required"),mess:t().nonempty("Mess is required")}),z=()=>{const[q,b]=x.useState(null),[j,p]=x.useState(!0),h=y({resolver:S(T),defaultValues:{name:"",rollNumber:"",personalEmail:"",hostel:"",gender:"",mess:""}});x.useEffect(()=>{(async()=>{try{const{data:{user:l},error:m}=await u.auth.getUser();if(m){console.error("Error fetching user details:",m),window.location.href="/login";return}const{data:r}=await u.from("users").select("*").eq("user_id",l==null?void 0:l.id).single();r&&(b(r),h.reset({name:(r==null?void 0:r.name)||"",rollNumber:(r==null?void 0:r.roll_number)||"",personalEmail:(r==null?void 0:r.email)||"",hostel:(r==null?void 0:r.hostel)||"",gender:(r==null?void 0:r.gender)||"",mess:(r==null?void 0:r.mess)||""})),p(!1)}catch(l){console.error("Error fetching user details:",l),p(!1)}})()},[h]);const f=async s=>{try{const{data:{user:l},error:m}=await u.auth.getUser();if(m){console.error("Error fetching user details:",m);return}const{error:r}=await u.from("users").update({user_id:l==null?void 0:l.id,name:s.name,roll_number:s.rollNumber,email:s.personalEmail,hostel:s.hostel,mess:s.mess,gender:s.gender}).eq("user_id",l==null?void 0:l.id);if(r){console.error("Error updating user details:",r);return}window.location.href="/"}catch(l){console.error("Error submitting the form:",l)}};return j?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black text-white",children:[e.jsx(L,{className:"w-12 h-12 animate-spin mb-4"}),e.jsx("p",{className:"text-xl"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"flex justify-between bg-black items-center p-[15px] md:p-4 border-b-[1px] border-neutral-800",children:[e.jsx("img",{src:"/motif.svg",alt:"Logo",style:{width:"40px",aspectRatio:"63 / 29"},className:"md:hidden block"}),e.jsx("img",{src:"/motif-desk.svg",alt:"Logo",style:{width:"120px",aspectRatio:"155 / 20"},className:"md:block hidden"}),e.jsx("img",{src:"/register.svg",alt:"Logo",style:{width:"110px",aspectRatio:"96 / 20"}})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-white w-full md:block hidden overflow-hidden",children:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-screen bg-white",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black"})}),children:e.jsx(C,{})})}),e.jsxs("div",{className:"flex flex-col w-full justify-center items-center min-h-screen bg-black p-4",children:[e.jsxs("div",{className:"flex self-start ml-4 mb-2 cursor-pointer",children:[e.jsx("img",{src:"/left-arrow.svg",alt:"Logo",style:{width:"15px",aspectRatio:"13 / 10"}}),e.jsx("a",{href:"/",className:"text-neutral-500 text-sm self-center pl-2 hover:text-white transition-[1s]",children:"GO BACK"})]}),e.jsx("h1",{className:"md:text-2xl text-3xl ml-8 mb-4 text-white md:text-left w-full text-left",children:"Complete your Application"}),e.jsxs("p",{className:"md:text-xs mb-4 ml-4 text-left md:text-sm text-white",children:["Please enter your details to attend TransfiNITTe 2024 Hackathon. By entering your information, you acknowledge you have read our ",e.jsx("a",{href:"/rulebook",className:"underline underline-offset-4",children:"Rulebook"}),"."]}),e.jsx(w,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(f),className:"text-white p-6 rounded-lg shadow-md w-full space-y-2",children:[e.jsx(a,{name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Full Name"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Full Name",...s,className:"bg-[#1a1a1a] border border-gray-600 mt-0 rounded-md p-2"})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx(a,{name:"rollNumber",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Roll Number"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter Roll Number",...s,className:"bg-[#1a1a1a] border mt-0 border-gray-600 rounded-md p-2"})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx(a,{name:"personalEmail",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Personal Email"}),e.jsx(i,{children:e.jsx(c,{type:"email",placeholder:"Enter your personal email",...s,className:"bg-[#1a1a1a] mt-0 border border-gray-600 rounded-md p-2",disabled:!0})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx(a,{name:"hostel",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Hostel"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter your hostel name",...s,className:"bg-[#1a1a1a] mt-0 border border-gray-600 rounded-md p-2"})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx(a,{name:"mess",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Mess"}),e.jsx(i,{children:e.jsx(c,{type:"text",placeholder:"Enter your Mess name",...s,className:"bg-[#1a1a1a] border mt-0 border-gray-600 rounded-md p-2"})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx(a,{name:"gender",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Gender"}),e.jsx(i,{children:e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(E,{className:"bg-[#1a1a1a] border border-gray-600 rounded-md",children:e.jsx(k,{placeholder:"Select Gender"})}),e.jsx(F,{children:I.map(l=>e.jsx(_,{value:l.value,children:l.label},l.value))})]})}),e.jsx(d,{className:"text-red-500"})]})}),e.jsx("div",{className:"w-full flex md:flex-row-reverse",children:e.jsx(R,{type:"submit",className:"md:px-16 md:w-auto mt-4 w-full py-4 px-4 bg-white text-black rounded-lg font-bold hover:bg-gray-300 transition duration-300",children:"Proceed"})})]})})]})]})]})};export{z as default};
