import{j as c}from"./ui-DtsVk1ZT.js";import{r as e}from"./vendor-DTE74Mn0.js";import{b as De,c as K,B as Ie,s as G}from"./supabase-DlqSYPSw.js";import{N as We}from"./Navbar-DZYycAMd.js";import{u as B}from"./index-D_CGr1NW.js";import{A as Ae}from"./arrow-up-right-CgHQYuXn.js";import"./supabase-BBSrB3Yz.js";import"./check-C9iSlceZ.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=De("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var Fe=Object.defineProperty,He=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ge=(t,n,a)=>n in t?Fe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Ge=(t,n)=>{for(var a in n||(n={}))ve.call(n,a)&&ge(t,a,n[a]);if(Q)for(var a of Q(n))be.call(n,a)&&ge(t,a,n[a]);return t},Ue=(t,n)=>He(t,Le(n)),$e=(t,n)=>{var a={};for(var i in t)ve.call(t,i)&&n.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&Q)for(var i of Q(t))n.indexOf(i)<0&&be.call(t,i)&&(a[i]=t[i]);return a};function qe(t){let n=setTimeout(t,0),a=setTimeout(t,10),i=setTimeout(t,50);return[n,a,i]}function ze(t){let n=e.useRef();return e.useEffect(()=>{n.current=t}),n.current}var Je=18,xe=40,Ve=`${xe}px`,Ye=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ze({containerRef:t,inputRef:n,pushPasswordManagerStrategy:a,isFocused:i}){let[E,d]=e.useState(!1),[g,l]=e.useState(!1),[x,v]=e.useState(!1),j=e.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&E&&g,[E,g,a]),T=e.useCallback(()=>{let f=t.current,S=n.current;if(!f||!S||x||a==="none")return;let C=f,N=C.getBoundingClientRect().left+C.offsetWidth,F=C.getBoundingClientRect().top+C.offsetHeight/2,u=N-Je,U=F;document.querySelectorAll(Ye).length===0&&document.elementFromPoint(u,U)===f||(d(!0),v(!0))},[t,n,x,a]);return e.useEffect(()=>{let f=t.current;if(!f||a==="none")return;function S(){let N=window.innerWidth-f.getBoundingClientRect().right;l(N>=xe)}S();let C=setInterval(S,1e3);return()=>{clearInterval(C)}},[t,a]),e.useEffect(()=>{let f=i||document.activeElement===n.current;if(a==="none"||!f)return;let S=setTimeout(T,0),C=setTimeout(T,2e3),N=setTimeout(T,5e3),F=setTimeout(()=>{v(!0)},6e3);return()=>{clearTimeout(S),clearTimeout(C),clearTimeout(N),clearTimeout(F)}},[n,i,a,T]),{hasPWMBadge:E,willPushPWMBadge:j,PWM_BADGE_SPACE_WIDTH:Ve}}var we=e.createContext({}),ye=e.forwardRef((t,n)=>{var a=t,{value:i,onChange:E,maxLength:d,textAlign:g="left",pattern:l,placeholder:x,inputMode:v="numeric",onComplete:j,pushPasswordManagerStrategy:T="increase-width",pasteTransformer:f,containerClassName:S,noScriptCSSFallback:C=Ke,render:N,children:F}=a,u=$e(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),U,ae,oe,le,ie;let[Ce,Pe]=e.useState(typeof u.defaultValue=="string"?u.defaultValue:""),p=i??Ce,_=ze(p),$=e.useCallback(r=>{E==null||E(r),Pe(r)},[E]),k=e.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),m=e.useRef(null),X=e.useRef(null),ee=e.useRef({value:p,onChange:$,isIOS:typeof window<"u"&&((ae=(U=window==null?void 0:window.CSS)==null?void 0:U.supports)==null?void 0:ae.call(U,"-webkit-touch-callout","none"))}),Y=e.useRef({prev:[(oe=m.current)==null?void 0:oe.selectionStart,(le=m.current)==null?void 0:le.selectionEnd,(ie=m.current)==null?void 0:ie.selectionDirection]});e.useImperativeHandle(n,()=>m.current,[]),e.useEffect(()=>{let r=m.current,o=X.current;if(!r||!o)return;ee.current.value!==r.value&&ee.current.onChange(r.value),Y.current.prev=[r.selectionStart,r.selectionEnd,r.selectionDirection];function h(){if(document.activeElement!==r){z(null),J(null);return}let s=r.selectionStart,b=r.selectionEnd,Z=r.selectionDirection,P=r.maxLength,I=r.value,M=Y.current.prev,R=-1,O=-1,W;if(I.length!==0&&s!==null&&b!==null){let Re=s===b,Oe=s===I.length&&I.length<P;if(Re&&!Oe){let A=s;if(A===0)R=0,O=1,W="forward";else if(A===P)R=A-1,O=A,W="backward";else if(P>1&&I.length>1){let ne=0;if(M[0]!==null&&M[1]!==null){W=A<M[1]?"backward":"forward";let _e=M[0]===M[1]&&M[0]<P;W==="backward"&&!_e&&(ne=-1)}R=ne+A,O=ne+A+1}}R!==-1&&O!==-1&&R!==O&&m.current.setSelectionRange(R,O,W)}let fe=R!==-1?R:s,he=O!==-1?O:b,Me=W??Z;z(fe),J(he),Y.current.prev=[fe,he,Me]}if(document.addEventListener("selectionchange",h,{capture:!0}),h(),document.activeElement===r&&te(!0),!document.getElementById("input-otp-style")){let s=document.createElement("style");if(s.id="input-otp-style",document.head.appendChild(s),s.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";V(s.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),V(s.sheet,`[data-input-otp]:autofill { ${b} }`),V(s.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),V(s.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),V(s.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let w=()=>{o&&o.style.setProperty("--root-height",`${r.clientHeight}px`)};w();let y=new ResizeObserver(w);return y.observe(r),()=>{document.removeEventListener("selectionchange",h,{capture:!0}),y.disconnect()}},[]);let[se,ce]=e.useState(!1),[q,te]=e.useState(!1),[D,z]=e.useState(null),[H,J]=e.useState(null);e.useEffect(()=>{qe(()=>{var r,o,h,w;(r=m.current)==null||r.dispatchEvent(new Event("input"));let y=(o=m.current)==null?void 0:o.selectionStart,s=(h=m.current)==null?void 0:h.selectionEnd,b=(w=m.current)==null?void 0:w.selectionDirection;y!==null&&s!==null&&(z(y),J(s),Y.current.prev=[y,s,b])})},[p,q]),e.useEffect(()=>{_!==void 0&&p!==_&&_.length<d&&p.length===d&&(j==null||j(p))},[d,j,_,p]);let L=Ze({containerRef:X,inputRef:m,pushPasswordManagerStrategy:T,isFocused:q}),ue=e.useCallback(r=>{let o=r.currentTarget.value.slice(0,d);if(o.length>0&&k&&!k.test(o)){r.preventDefault();return}typeof _=="string"&&o.length<_.length&&document.dispatchEvent(new Event("selectionchange")),$(o)},[d,$,_,k]),de=e.useCallback(()=>{var r;if(m.current){let o=Math.min(m.current.value.length,d-1),h=m.current.value.length;(r=m.current)==null||r.setSelectionRange(o,h),z(o),J(h)}te(!0)},[d]),pe=e.useCallback(r=>{var o,h;let w=m.current;if(!f&&(!ee.current.isIOS||!r.clipboardData||!w))return;let y=r.clipboardData.getData("text/plain"),s=f?f(y):y;r.preventDefault();let b=(o=m.current)==null?void 0:o.selectionStart,Z=(h=m.current)==null?void 0:h.selectionEnd,P=(b!==Z?p.slice(0,b)+s+p.slice(Z):p.slice(0,b)+s+p.slice(b)).slice(0,d);if(P.length>0&&k&&!k.test(P))return;w.value=P,$(P);let I=Math.min(P.length,d-1),M=P.length;w.setSelectionRange(I,M),z(I),J(M)},[d,$,k,p]),Te=e.useMemo(()=>({position:"relative",cursor:u.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[u.disabled]),me=e.useMemo(()=>({position:"absolute",inset:0,width:L.willPushPWMBadge?`calc(100% + ${L.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:L.willPushPWMBadge?`inset(0 ${L.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:g,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[L.PWM_BADGE_SPACE_WIDTH,L.willPushPWMBadge,g]),ke=e.useMemo(()=>e.createElement("input",Ue(Ge({autoComplete:u.autoComplete||"one-time-code"},u),{"data-input-otp":!0,"data-input-otp-placeholder-shown":p.length===0||void 0,"data-input-otp-mss":D,"data-input-otp-mse":H,inputMode:v,pattern:k==null?void 0:k.source,"aria-placeholder":x,style:me,maxLength:d,value:p,ref:m,onPaste:r=>{var o;pe(r),(o=u.onPaste)==null||o.call(u,r)},onChange:ue,onMouseOver:r=>{var o;ce(!0),(o=u.onMouseOver)==null||o.call(u,r)},onMouseLeave:r=>{var o;ce(!1),(o=u.onMouseLeave)==null||o.call(u,r)},onFocus:r=>{var o;de(),(o=u.onFocus)==null||o.call(u,r)},onBlur:r=>{var o;te(!1),(o=u.onBlur)==null||o.call(u,r)}})),[ue,de,pe,v,me,d,H,D,u,k==null?void 0:k.source,p]),re=e.useMemo(()=>({slots:Array.from({length:d}).map((r,o)=>{var h;let w=q&&D!==null&&H!==null&&(D===H&&o===D||o>=D&&o<H),y=p[o]!==void 0?p[o]:null,s=p[0]!==void 0?null:(h=x==null?void 0:x[o])!=null?h:null;return{char:y,placeholderChar:s,isActive:w,hasFakeCaret:w&&y===null}}),isFocused:q,isHovering:!u.disabled&&se}),[q,se,d,H,D,u.disabled,p]),Ne=e.useMemo(()=>N?N(re):e.createElement(we.Provider,{value:re},F),[F,re,N]);return e.createElement(e.Fragment,null,C!==null&&e.createElement("noscript",null,e.createElement("style",null,C)),e.createElement("div",{ref:X,"data-input-otp-container":!0,style:Te,className:S},Ne,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ke)))});ye.displayName="Input";function V(t,n){try{t.insertRule(n)}catch{console.error("input-otp could not insert CSS rule:",n)}}var Ke=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Ee=e.forwardRef(({className:t,containerClassName:n,...a},i)=>c.jsx(ye,{ref:i,containerClassName:K("flex items-center gap-2 has-[:disabled]:opacity-50",n),className:K("disabled:cursor-not-allowed",t),...a}));Ee.displayName="InputOTP";const je=e.forwardRef(({className:t,...n},a)=>c.jsx("div",{ref:a,className:K("flex items-center",t),...n}));je.displayName="InputOTPGroup";const Se=e.forwardRef(({index:t,className:n,...a},i)=>{const E=e.useContext(we),{char:d,hasFakeCaret:g,isActive:l}=E.slots[t];return c.jsxs("div",{ref:i,className:K("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",n),...a,children:[d,g&&c.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Se.displayName="InputOTPSlot";const Qe=e.forwardRef(({...t},n)=>c.jsx("div",{ref:n,role:"separator",...t,children:c.jsx(Be,{})}));Qe.displayName="InputOTPSeparator";const it=()=>{const[t,n]=e.useState(""),[a,i]=e.useState(void 0);e.useEffect(()=>{(async()=>{try{const{data:{user:l},error:x}=await G.auth.getUser();if(x){console.error(x);return}const{data:v,error:j}=await G.from("users").select("*").eq("user_id",l==null?void 0:l.id).single();if(j){console.error(j);return}i(v==null?void 0:v.name)}catch(l){console.error(l)}})()},[]);const E=g=>{n(g)},d=async g=>{if(g.preventDefault(),!t){B("Whoops!",{description:"Team code is required."});return}try{const{data:{user:l},error:x}=await G.auth.getUser();if(x){console.error(x);return}const{data:v,error:j}=await G.from("users").select("*").eq("user_id",l==null?void 0:l.id).single();if(j){console.error(j);return}if(v!=null&&v.team_id){B("Uh oh!",{description:"You are already part of a team."});return}const{data:T,error:f}=await G.rpc("count_team_members",{team_id_input:t});if(console.log("memberCount",T),f){console.error("Error joining team",f),B("Whoops!",{description:"Error joining team. Please try again."});return}if(T&&T>=5){B("Maximum capacity reached!",{description:"Team already has maximum number of members in it."});return}const{error:S}=await G.from("users").update({team_id:t}).eq("user_id",l==null?void 0:l.id);if(S){console.error("Error joining team",S),B("Whoops!",{description:"Error joining team. Please try again."});return}B("Success!",{description:"You have successfully joined the team."}),setTimeout(()=>{window.location.href="/"},1e3)}catch(l){console.error("Error joining team",l),B("Whoops!",{description:"Error joining team. Please try again."})}};return c.jsxs("div",{className:"flex flex-col min-h-screen bg-black text-white",children:[c.jsx(We,{userName:a}),c.jsx("main",{className:"flex-grow flex flex-col justify-center items-center px-4 md:px-6",children:c.jsxs("div",{className:"w-full max-w-md space-y-6 bg-[#1a1a1a] p-8 rounded-lg shadow-lg",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center",children:"Join Team"}),c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{htmlFor:"teamCode",className:"block text-sm font-medium text-gray-400",children:["Enter Team Code"," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Ee,{value:t,onChange:E,maxLength:6,children:c.jsx(je,{className:"flex space-x-2 justify-center",children:Array.from({length:6},(g,l)=>c.jsx(Se,{index:l,className:"bg-[#2a2a2a] border border-gray-600 text-white w-12 h-12 text-center rounded-lg text-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},l))})})})]}),c.jsxs(Ie,{type:"submit",className:"w-full bg-white hover:bg-gray-200 text-black font-bold py-3 rounded-lg flex items-center justify-center gap-2",children:[c.jsx("span",{children:"Join Team"}),c.jsx(Ae,{className:"h-5 w-5"})]})]})]})})]})};export{it as default};
